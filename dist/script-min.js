var margin={top:40,right:20,bottom:60,left:60},width=960-margin.left-margin.right,height=500-margin.top-margin.bottom,red="#D64541",blue="#446CB3";function drawCurve(t){var e,a=d3.scaleLinear().range([0,width]).domain([0,100]),r=d3.scaleLinear().range([height,0]).domain([0,100]),s=d3.select("#"+t).select(".tooltip"),n=d3.select("#"+t).node().dataset;d3.select("#"+t).select("svg").selectAll("*").remove();var o=d3.select("#"+t).select("svg").attr("width",width+margin.left+margin.right).attr("height",height+margin.top+margin.bottom).on("mouseover",function(t){}).on("mousemove",function(t){(e=a.invert(d3.mouse(this)[0]-margin.left).toFixed(2))<0||e>100?s.classed("hidden",!0):s.classed("hidden",!1).html("At "+e+"% of vote:<br><br>").style("left",d3.mouse(this)[0]+20+"px").style("top",height-30+"px")}).on("mouseout",function(t){s.classed("hidden",!0)}).append("g").attr("transform","translate("+margin.left+","+margin.top+")");o.append("g").attr("transform","translate(0,"+height+")").call(d3.axisBottom(a).ticks(5).tickFormat(function(t){return t+"%"})),o.append("text").attr("transform","translate("+width/2+" ,"+(height+margin.top+10)+")").attr("class","axis-label").text("Percentage of Vote"),o.append("text").attr("transform","translate("+width/2+" ,-20)").attr("class","axis-label").text("Seats-Votes Curve for "+n.state+" in "+n.year),o.append("g").call(d3.axisLeft(r).ticks(5).tickFormat(function(t){return t+"%"})),o.append("text").attr("transform","rotate(-90)").attr("y",0-margin.left).attr("x",0-height/2).attr("dy","1em").attr("class","axis-label").text("Percentage of Seats"),d3.csv("../data/seats-votes/"+t+".csv",function(t,e){e.forEach(function(t){t.votesR=parseFloat(t.votesR),t.seatsR=parseFloat(t.seatsR),t.votesD=parseFloat(t.votesD),t.seatsD=parseFloat(t.seatsD)});var s=d3.line().x(function(t){return a(t.votesR)}).y(function(t){return r(t.seatsR)}),n=d3.line().x(function(t){return a(t.votesD)}).y(function(t){return r(t.seatsD)});o.append("path").data([e]).style("stroke",red).attr("class","line").attr("d",s),o.append("path").data([e]).style("stroke",blue).attr("class","line").attr("d",n)})}drawCurve("test");